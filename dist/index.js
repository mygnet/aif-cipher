'use strict';exports.__esModule=!0,exports.Aes=void 0,exports.md5=md5;var _crypto=require('crypto'),_crypto2=_interopRequireDefault(_crypto);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function md5(a){var b=_crypto2.default.createHash('md5');return b.update(a+''),b.digest('hex')}var Aes=exports.Aes=function(){function a(){_classCallCheck(this,a)}return a.setCredentials=function d(b,c){b&&(a.secret=b),c&&(a.token=c)},a.encode=function i(b,c,d){if(!b)return'';var e='';d=d||a.token,d||(e=d=md5(c+Math.random())),c=c||a.secret;var f=d.substr(0,16),g=md5(c+d),h=_crypto2.default.createCipheriv('aes-256-cbc',g,f);try{b=e+h.update(b,'utf8','base64')+h.final('base64')}catch(a){console.log('Error encode',a)}return b},a.decode=function h(b,c,d){if(!b)return'';d||a.token?d=d||a.token:(d=b.substr(0,32),b=b.substr(32)),c=c||a.secret;var e=d.substr(0,16),f=md5(c+d),g=_crypto2.default.createDecipheriv('aes-256-cbc',f,e);try{b=g.update(b,'base64','utf8')+g.final('utf8')}catch(a){global.lastError=a.toString(),b=null,console.log('Error decode',a)}return b},a}();